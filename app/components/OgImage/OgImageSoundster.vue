<script lang="ts" setup>
import type { Contributor } from '#shared/types'

defineProps<{ contributor: Contributor }>()

defineOptions({
  inheritAttrs: false,
})

const { format } = Intl.NumberFormat('en-GB', {})
</script>

<template>
  <div class="flex flex-row justify-between w-full h-full p-[38px] bg-slate-900">
    <div class="flex flex-col w-1/3 items-center py-10 justify-between text-white">
      <div class="flex flex-col items-center">
        <UAvatar
          :src="contributor.username"
          :ui="{ root: 'flex size-32 text-5xl', image: 'rounded-full' }"
          width="200"
          height="200"
        />
        <div class="text-3xl pt-[18px]">
          {{ contributor.username }}
        </div>
        <div class="pt-12">
          <svg
            width="119"
            height="2"
            viewBox="0 0 119 2"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <line
              x1="0.5"
              y1="0.882812"
              x2="118.5"
              y2="0.882812"
              stroke="url(#paint0_linear_186_15197)"
            />
            <defs>
              <linearGradient
                id="paint0_linear_186_15197"
                x1="-1.5"
                y1="1.00029"
                x2="113"
                y2="1.00033"
                gradientUnits="userSpaceOnUse"
              >
                <stop
                  stop-color="#CBD5E1"
                  stop-opacity="0"
                />
                <stop
                  offset="0.494792"
                  stop-color="#CBD5E1"
                />
                <stop
                  offset="0.979167"
                  stop-color="#CBD5E1"
                  stop-opacity="0"
                />
              </linearGradient>
            </defs>
          </svg>
        </div>
        <div class="flex flex-row text-white items-center pt-12">
          <svg
            width="41"
            height="41"
            viewBox="0 0 41 41"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M37.3227 14.4875V14.6091C37.3227 16.0425 37.3227 16.7609 36.9777 17.3475C36.6327 17.9342 36.0044 18.2825 34.751 18.9809L33.4293 19.7142C34.3393 16.6342 34.6443 13.3241 34.756 10.4941L34.7727 10.1257L34.776 10.0391C35.861 10.4157 36.471 10.6974 36.851 11.2241C37.3227 11.8791 37.3227 12.7491 37.3227 14.4875ZM3.98877 14.4875V14.6091C3.98877 16.0425 3.98877 16.7609 4.33378 17.3475C4.67878 17.9342 5.30713 18.2825 6.56048 18.9809L7.88384 19.7142C6.97216 16.6342 6.66715 13.3241 6.55548 10.4941L6.53882 10.1257L6.53715 10.0391C5.45046 10.4157 4.84045 10.6974 4.46044 11.2241C3.98877 11.8791 3.98877 12.7508 3.98877 14.4875Z"
              fill="#F8FAFC"
            />
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M20.6553 4.21524C23.6287 4.21524 26.077 4.47691 27.9504 4.79358C29.8488 5.11359 30.7971 5.27359 31.5905 6.25027C32.3838 7.22696 32.3405 8.28198 32.2572 10.392C31.9705 17.6405 30.4071 26.6923 21.9053 27.4923V33.3824H24.2887C24.6738 33.3827 25.047 33.5163 25.3448 33.7606C25.6426 34.0049 25.8465 34.3448 25.922 34.7225L26.2387 36.2992H30.6555C30.987 36.2992 31.3049 36.4309 31.5394 36.6653C31.7738 36.8997 31.9055 37.2176 31.9055 37.5492C31.9055 37.8807 31.7738 38.1987 31.5394 38.4331C31.3049 38.6675 30.987 38.7992 30.6555 38.7992H10.6551C10.3236 38.7992 10.0056 38.6675 9.77119 38.4331C9.53677 38.1987 9.40507 37.8807 9.40507 37.5492C9.40507 37.2176 9.53677 36.8997 9.77119 36.6653C10.0056 36.4309 10.3236 36.2992 10.6551 36.2992H15.0718L15.3885 34.7225C15.464 34.3448 15.668 34.0049 15.9657 33.7606C16.2635 33.5163 16.6367 33.3827 17.0219 33.3824H19.4053V27.4923C10.9051 26.6923 9.34174 17.6388 9.05507 10.392C8.97006 8.28198 8.9284 7.22529 9.72174 6.25027C10.5134 5.27359 11.4618 5.11359 13.3601 4.79358C15.7716 4.39837 18.2117 4.20492 20.6553 4.21524ZM22.242 11.2137L22.0786 10.9204C21.4453 9.782 21.1286 9.21533 20.6553 9.21533C20.1819 9.21533 19.8653 9.782 19.2319 10.9204L19.0686 11.2137C18.8886 11.537 18.7986 11.697 18.6586 11.8037C18.5169 11.9104 18.3419 11.9504 17.9919 12.0287L17.6752 12.102C16.4452 12.3804 15.8302 12.5187 15.6835 12.9887C15.5368 13.4604 15.9569 13.9504 16.7952 14.9304L17.0119 15.1838C17.2502 15.4621 17.3702 15.6004 17.4235 15.7738C17.4769 15.9471 17.4586 16.1321 17.4235 16.5038L17.3902 16.8421C17.2635 18.1505 17.2002 18.8055 17.5819 19.0955C17.9652 19.3855 18.5419 19.1205 19.6936 18.5905L19.9903 18.4538C20.3186 18.3038 20.4819 18.2288 20.6553 18.2288C20.8286 18.2288 20.9919 18.3038 21.3203 18.4538L21.617 18.5905C22.7686 19.1222 23.3453 19.3855 23.7287 19.0955C24.112 18.8055 24.047 18.1505 23.9203 16.8421L23.887 16.5038C23.852 16.1321 23.8337 15.9471 23.887 15.7738C23.9403 15.6021 24.0603 15.4621 24.2987 15.1838L24.5153 14.9304C25.3537 13.9504 25.7737 13.4604 25.627 12.9887C25.4804 12.5187 24.8654 12.3804 23.6353 12.102L23.3187 12.0287C22.9686 11.9504 22.7936 11.912 22.652 11.8037C22.512 11.697 22.422 11.537 22.242 11.2137Z"
              fill="#F8FAFC"
            />
          </svg>
          <div class="font-medium text-4xl pl-2 pt-1">
            {{ format(contributor.score) }}
          </div>
        </div>
        <div class="flex flex-row text-neutral-400 items-center pt-3 font-medium text-3xl">
          #{{ format(contributor.rank) }}
        </div>
      </div>
<svg width="235" height="54" viewBox="0 0 941 218" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M245.832 218C241.081 218 236.416 217.55 231.838 216.651C227.26 215.751 223.027 214.452 219.14 212.752C215.252 211.053 211.883 209.054 209.033 206.755L215.641 185.315C218.319 187.314 221.299 189.063 224.582 190.563C227.864 192.062 231.32 193.261 234.948 194.161C238.576 194.961 242.204 195.36 245.832 195.36C251.534 195.36 255.507 194.511 257.753 192.812C260.085 191.012 261.252 188.813 261.252 186.215C261.252 184.615 260.906 183.266 260.215 182.166C259.524 181.067 258.358 180.117 256.717 179.318C255.162 178.418 253.045 177.668 250.367 177.069L235.207 173.32C226.914 171.321 220.738 167.823 216.678 162.825C212.618 157.828 210.588 151.381 210.588 143.484C210.588 136.487 212.186 130.44 215.382 125.342C218.665 120.145 223.2 116.147 228.987 113.348C234.861 110.449 241.599 109 249.201 109C253.434 109 257.494 109.45 261.381 110.349C265.355 111.249 269.026 112.598 272.395 114.398C275.764 116.097 278.615 118.096 280.947 120.395L274.339 140.486C271.056 137.687 267.212 135.538 262.807 134.039C258.487 132.439 253.866 131.64 248.942 131.64C245.746 131.64 243.025 132.089 240.779 132.989C238.533 133.789 236.805 134.988 235.596 136.587C234.473 138.187 233.911 140.036 233.911 142.135C233.911 144.234 234.646 146.033 236.114 147.532C237.669 148.932 240.476 150.131 244.536 151.131L259.567 154.879C267.946 156.978 274.209 160.426 278.356 165.224C282.502 170.022 284.575 176.269 284.575 183.966C284.575 190.762 282.977 196.76 279.781 201.957C276.585 207.055 272.093 211.003 266.305 213.802C260.517 216.601 253.693 218 245.832 218Z" fill="white"/>
<path d="M326.994 218C319.911 218 313.734 216.451 308.465 213.352C303.195 210.254 299.092 205.806 296.155 200.008C293.218 194.211 291.749 187.364 291.749 179.468C291.749 171.471 293.218 164.624 296.155 158.927C299.092 153.13 303.195 148.682 308.465 145.583C313.734 142.485 319.911 140.935 326.994 140.935C334.077 140.935 340.254 142.485 345.523 145.583C350.793 148.682 354.853 153.13 357.703 158.927C360.64 164.624 362.109 171.471 362.109 179.468C362.109 187.364 360.64 194.211 357.703 200.008C354.853 205.806 350.793 210.254 345.523 213.352C340.254 216.451 334.077 218 326.994 218ZM326.994 198.359C330.449 198.359 333.3 196.86 335.546 193.861C337.792 190.862 338.915 186.065 338.915 179.468C338.915 172.771 337.792 167.973 335.546 165.074C333.3 162.076 330.449 160.576 326.994 160.576C323.452 160.576 320.558 162.076 318.312 165.074C316.066 167.973 314.943 172.771 314.943 179.468C314.943 186.065 316.066 190.862 318.312 193.861C320.558 196.86 323.452 198.359 326.994 198.359Z" fill="white"/>
<path d="M396.519 218C390.991 218 386.456 216.851 382.914 214.552C379.372 212.153 376.694 208.604 374.88 203.906C373.153 199.209 372.289 193.261 372.289 186.065V142.585H395.353V186.814C395.353 189.213 395.612 191.212 396.131 192.812C396.735 194.411 397.642 195.61 398.852 196.41C400.061 197.21 401.573 197.609 403.387 197.609C405.46 197.609 407.274 197.06 408.829 195.96C410.47 194.761 411.723 193.111 412.587 191.012C413.537 188.813 414.012 186.265 414.012 183.366V142.585H437.076V216.351H414.53V202.857H416.603C414.703 207.755 412.025 211.503 408.57 214.102C405.201 216.701 401.184 218 396.519 218Z" fill="white"/>
<path d="M450.499 216.351V142.585H472.915V155.479H471.49C473.563 150.781 476.5 147.182 480.301 144.684C484.188 142.185 488.594 140.935 493.518 140.935C498.614 140.935 502.804 142.085 506.086 144.384C509.369 146.583 511.831 150.081 513.472 154.879C515.114 159.577 515.934 165.524 515.934 172.721V216.351H492.87V173.77C492.87 170.772 492.567 168.373 491.963 166.574C491.358 164.674 490.451 163.325 489.242 162.525C488.119 161.726 486.693 161.326 484.966 161.326C482.633 161.326 480.603 161.926 478.876 163.125C477.148 164.225 475.809 165.824 474.859 167.923C473.995 170.022 473.563 172.521 473.563 175.42V216.351H450.499Z" fill="white"/>
<path d="M553.957 218C548.515 218 543.678 216.451 539.445 213.352C535.299 210.254 532.016 205.806 529.597 200.008C527.265 194.211 526.099 187.364 526.099 179.468C526.099 171.371 527.265 164.475 529.597 158.777C532.016 153.08 535.299 148.682 539.445 145.583C543.678 142.485 548.515 140.935 553.957 140.935C558.709 140.935 562.985 142.235 566.785 144.834C570.586 147.432 573.135 150.781 574.43 154.879H573.005V110.649H596.069V216.351H573.523V203.007H574.69C573.48 207.505 570.932 211.153 567.045 213.952C563.244 216.651 558.881 218 553.957 218ZM561.343 198.359C564.799 198.359 567.649 196.86 569.895 193.861C572.141 190.862 573.264 186.065 573.264 179.468C573.264 172.771 572.141 167.973 569.895 165.074C567.649 162.076 564.799 160.576 561.343 160.576C557.802 160.576 554.908 162.076 552.662 165.074C550.416 167.973 549.293 172.771 549.293 179.468C549.293 186.065 550.416 190.862 552.662 193.861C554.908 196.86 557.802 198.359 561.343 198.359Z" fill="white"/>
<path d="M634.828 218C630.94 218 627.183 217.7 623.555 217.1C620.013 216.501 616.774 215.601 613.836 214.402C610.899 213.202 608.265 211.753 605.932 210.054L611.245 192.812C613.405 194.211 615.78 195.46 618.372 196.56C621.05 197.659 623.814 198.509 626.664 199.109C629.515 199.708 632.279 200.008 634.957 200.008C638.153 200.008 640.443 199.508 641.825 198.509C643.207 197.409 643.898 196.01 643.898 194.311C643.898 192.812 643.423 191.662 642.473 190.862C641.609 190.063 640.356 189.513 638.715 189.213L624.332 186.514C618.976 185.415 614.83 183.166 611.893 179.768C608.956 176.269 607.487 171.721 607.487 166.124C607.487 160.926 608.74 156.478 611.245 152.78C613.836 148.982 617.335 146.083 621.741 144.084C626.233 141.985 631.372 140.935 637.16 140.935C640.27 140.935 643.336 141.235 646.36 141.835C649.383 142.335 652.277 143.184 655.041 144.384C657.806 145.483 660.311 146.983 662.557 148.882L656.856 165.824C655.214 164.425 653.271 163.225 651.025 162.226C648.779 161.226 646.446 160.426 644.028 159.827C641.695 159.127 639.536 158.777 637.549 158.777C634.007 158.777 631.502 159.327 630.033 160.426C628.565 161.526 627.831 162.925 627.831 164.624C627.831 165.924 628.219 167.023 628.997 167.923C629.774 168.723 630.984 169.272 632.625 169.572L647.008 172.421C652.536 173.42 656.769 175.619 659.706 179.018C662.73 182.316 664.241 186.814 664.241 192.512C664.241 197.909 663.032 202.507 660.613 206.305C658.194 210.104 654.782 213.002 650.377 215.001C645.971 217 640.788 218 634.828 218Z" fill="white"/>
<path d="M706.51 218C696.835 218 689.665 215.401 685.001 210.204C680.336 205.006 678.004 197.16 678.004 186.664V162.226H666.083V142.585H678.004V121.144H701.068V142.585H719.209V162.226H701.068V185.765C701.068 189.463 701.802 192.212 703.271 194.011C704.826 195.71 707.244 196.56 710.527 196.56C711.564 196.56 712.687 196.41 713.896 196.11C715.192 195.81 716.617 195.46 718.172 195.061L721.282 214.252C719.295 215.451 716.963 216.351 714.285 216.95C711.693 217.65 709.102 218 706.51 218Z" fill="white"/>
<path d="M762.344 218C754.57 218 747.832 216.451 742.13 213.352C736.515 210.154 732.196 205.656 729.173 199.858C726.149 194.061 724.638 187.214 724.638 179.318C724.638 171.721 726.063 165.074 728.914 159.377C731.851 153.58 735.824 149.082 740.835 145.883C745.931 142.585 751.719 140.935 758.198 140.935C764.676 140.935 770.248 142.485 774.913 145.583C779.578 148.682 783.163 153.13 785.668 158.927C788.259 164.624 789.555 171.321 789.555 179.018V184.865H743.944V172.271H772.71L770.637 174.22C770.637 168.823 769.643 164.824 767.657 162.226C765.67 159.527 762.862 158.177 759.234 158.177C756.556 158.177 754.224 158.927 752.237 160.426C750.337 161.826 748.868 163.925 747.832 166.724C746.795 169.522 746.277 173.021 746.277 177.219V178.568C746.277 183.266 746.838 187.064 747.961 189.963C749.171 192.862 751.028 195.011 753.533 196.41C756.038 197.709 759.191 198.359 762.992 198.359C766.275 198.359 769.687 197.809 773.228 196.71C776.857 195.51 780.053 193.811 782.817 191.612L788.518 209.154C785.236 211.853 781.219 214.002 776.468 215.601C771.717 217.2 767.009 218 762.344 218Z" fill="white"/>
<path d="M799.492 216.351V142.585H821.908V160.726H820.613C821.476 154.729 823.636 150.081 827.091 146.783C830.633 143.384 835.255 141.485 840.956 141.085L847.305 140.486L848.601 162.975L836.032 164.325C831.454 164.824 828.128 166.324 826.055 168.823C823.981 171.221 822.945 174.82 822.945 179.618V216.351H799.492Z" fill="white"/>
<path d="M880.439 218C876.552 218 872.794 217.7 869.166 217.1C865.624 216.501 862.385 215.601 859.448 214.402C856.511 213.202 853.876 211.753 851.544 210.054L856.856 192.812C859.016 194.211 861.391 195.46 863.983 196.56C866.661 197.659 869.425 198.509 872.276 199.109C875.126 199.708 877.891 200.008 880.568 200.008C883.765 200.008 886.054 199.508 887.436 198.509C888.818 197.409 889.509 196.01 889.509 194.311C889.509 192.812 889.034 191.662 888.084 190.862C887.22 190.063 885.967 189.513 884.326 189.213L869.943 186.514C864.588 185.415 860.441 183.166 857.504 179.768C854.567 176.269 853.098 171.721 853.098 166.124C853.098 160.926 854.351 156.478 856.856 152.78C859.448 148.982 862.946 146.083 867.352 144.084C871.844 141.985 876.984 140.935 882.771 140.935C885.881 140.935 888.948 141.235 891.971 141.835C894.995 142.335 897.888 143.184 900.653 144.384C903.417 145.483 905.922 146.983 908.168 148.882L902.467 165.824C900.825 164.425 898.882 163.225 896.636 162.226C894.39 161.226 892.058 160.426 889.639 159.827C887.306 159.127 885.147 158.777 883.16 158.777C879.618 158.777 877.113 159.327 875.645 160.426C874.176 161.526 873.442 162.925 873.442 164.624C873.442 165.924 873.831 167.023 874.608 167.923C875.385 168.723 876.595 169.272 878.236 169.572L892.619 172.421C898.148 173.42 902.38 175.619 905.317 179.018C908.341 182.316 909.853 186.814 909.853 192.512C909.853 197.909 908.643 202.507 906.224 206.305C903.806 210.104 900.393 213.002 895.988 215.001C891.582 217 886.399 218 880.439 218Z" fill="white"/>
<path d="M62.0471 152.075L54.3184 147.959L9.78721 124.241C6.91519 122.712 4.52474 120.513 2.8561 117.866C1.18745 115.219 0.298634 112.216 0.280372 109.161C0.261723 106.106 1.11324 103.105 2.75008 100.461C4.38691 97.8164 6.75053 95.6216 9.60379 94.0974C20.0988 88.4814 29.5665 83.4152 38.4645 78.6538C41.2411 77.168 43.9623 75.7119 46.6419 74.278C47.9403 73.5832 49.2289 72.8937 50.5093 72.2085C51.8063 71.5145 53.0949 70.8249 54.3768 70.139C55.6927 69.4349 57.0015 68.7345 58.305 68.037C59.5784 67.3556 60.8468 66.6769 62.1117 66L62.0879 97.7198L54.353 101.858L47.4777 105.537L40.6023 109.215L54.342 116.533L62.0707 120.65L62.0471 152.075Z" fill="#00DC82"/>
<path d="M101.955 36.2702L157.805 2.52065C160.63 0.842297 163.834 -0.0268245 167.095 0.00062561C170.356 0.0280827 173.56 0.951413 176.384 2.67766C179.208 4.4035 181.553 6.87176 183.183 9.83386C184.813 12.796 185.672 16.1483 185.672 19.5533L185.63 198.751C185.632 202.156 184.774 205.494 183.144 208.431C181.514 211.367 179.169 213.797 176.345 215.476C173.521 217.156 170.317 218.026 167.056 217.999C163.794 217.973 160.59 217.05 157.767 215.323L101.955 181.21C61.5 155.494 68.8689 165 68.8689 121.074L68.8689 93.9137C68.8689 51 64.5 59 101.955 36.2702ZM117.464 155.494L156.419 179.292L156.442 38.4995C156.442 38.4995 134.812 50.108 114.656 63.9791C94.5 77.8503 98.0754 69.5 98.1059 93.9137C98.1365 118.327 98.0911 120.294 98.0911 120.294C98.1059 147 94 140.5 117.464 155.494Z" fill="#00DC82"/>
</svg>

    </div>
    <div class="flex flex-col w-[31.5%] text-white justify-between">
      <div class="h-[48%]">
        <IssuesCard :issues="contributor.issues" />
      </div>
      <div class="h-[48%]">
        <PullRequestCard :pull-requests="contributor.merged_pull_requests" />
      </div>
    </div>
    <div class="flex flex-col w-[31.5%] text-white justify-between">
      <div class="h-[48%]">
        <CommentsCard :comments="contributor.comments" />
      </div>
      <div class="h-[48%]">
        <ReactionsCard :reactions="contributor.reactions" />
      </div>
    </div>
  </div>
</template>

<style scoped lang="postcss">
.card-border::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border-radius: 10px;
  background-image: linear-gradient(to bottom right, #00dc82, #1e293b);
  z-index: -1;
}

.card-border {
  z-index: 50;
}

.profile-card {
  background-image: url('http://localhost:3000/card-gradient-bg.svg');
  background-repeat: no-repeat;
  background-size: 300%;
}

.card {
  @apply rounded-xl border bg-no-repeat bg-top p-6 text-center flex flex-col items-center justify-end;
}

.issues-card {
  background-image: linear-gradient(180deg, rgba(0, 220, 130, 0.4) 0%, rgba(0, 220, 130, 0) 100%, rgba(2, 4, 32, 0.5)),
    url('http://localhost:3000/issues-card-bg.svg');
}

.comments-card {
  background-image: linear-gradient(180deg, rgba(64, 187, 255, 0.4) 0%, rgba(64, 187, 255, 0) 100%, rgba(2, 4, 32, 0.5)),
    url('http://localhost:3000/comments-card-bg.svg');
}

.pull-requests-card {
  background-image: linear-gradient(180deg, rgba(139, 92, 246, 0.4) 0%, rgba(139, 92, 246, 0) 100%, rgba(2, 4, 32, 0.5)),
    url('http://localhost:3000/pull-requests-card-bg.svg');
}

.reactions-card {
  background-image: linear-gradient(180deg, rgba(247, 209, 76, 0.4) 0%, rgba(247, 209, 76, 0) 100%, rgba(2, 4, 32, 0.5)),
    url('http://localhost:3000/reactions-card-bg.webp');
}
</style>
