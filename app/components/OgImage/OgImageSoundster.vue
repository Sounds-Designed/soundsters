<script lang="ts" setup>
import type { Contributor } from '#shared/types'

defineProps<{ contributor: Contributor }>()

defineOptions({
  inheritAttrs: false,
})

const { format } = Intl.NumberFormat('en-GB', {})
</script>

<template>
  <div class="flex flex-row justify-between w-full h-full p-[38px] bg-slate-900">
    <div class="flex flex-col w-1/3 items-center py-10 justify-between text-white">
      <div class="flex flex-col items-center">
        <UAvatar
          :src="contributor.username"
          :ui="{ root: 'flex size-32 text-5xl', image: 'rounded-full' }"
          width="200"
          height="200"
        />
        <div class="text-3xl pt-[18px]">
          {{ contributor.username }}
        </div>
        <div class="pt-12">
          <svg
            width="119"
            height="2"
            viewBox="0 0 119 2"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <line
              x1="0.5"
              y1="0.882812"
              x2="118.5"
              y2="0.882812"
              stroke="url(#paint0_linear_186_15197)"
            />
            <defs>
              <linearGradient
                id="paint0_linear_186_15197"
                x1="-1.5"
                y1="1.00029"
                x2="113"
                y2="1.00033"
                gradientUnits="userSpaceOnUse"
              >
                <stop
                  stop-color="#CBD5E1"
                  stop-opacity="0"
                />
                <stop
                  offset="0.494792"
                  stop-color="#CBD5E1"
                />
                <stop
                  offset="0.979167"
                  stop-color="#CBD5E1"
                  stop-opacity="0"
                />
              </linearGradient>
            </defs>
          </svg>
        </div>
        <div class="flex flex-row text-white items-center pt-12">
          <svg
            width="41"
            height="41"
            viewBox="0 0 41 41"
            fill="none"
            xmlns="http://www.w3.org/2000/svg"
          >
            <path
              d="M37.3227 14.4875V14.6091C37.3227 16.0425 37.3227 16.7609 36.9777 17.3475C36.6327 17.9342 36.0044 18.2825 34.751 18.9809L33.4293 19.7142C34.3393 16.6342 34.6443 13.3241 34.756 10.4941L34.7727 10.1257L34.776 10.0391C35.861 10.4157 36.471 10.6974 36.851 11.2241C37.3227 11.8791 37.3227 12.7491 37.3227 14.4875ZM3.98877 14.4875V14.6091C3.98877 16.0425 3.98877 16.7609 4.33378 17.3475C4.67878 17.9342 5.30713 18.2825 6.56048 18.9809L7.88384 19.7142C6.97216 16.6342 6.66715 13.3241 6.55548 10.4941L6.53882 10.1257L6.53715 10.0391C5.45046 10.4157 4.84045 10.6974 4.46044 11.2241C3.98877 11.8791 3.98877 12.7508 3.98877 14.4875Z"
              fill="#F8FAFC"
            />
            <path
              fill-rule="evenodd"
              clip-rule="evenodd"
              d="M20.6553 4.21524C23.6287 4.21524 26.077 4.47691 27.9504 4.79358C29.8488 5.11359 30.7971 5.27359 31.5905 6.25027C32.3838 7.22696 32.3405 8.28198 32.2572 10.392C31.9705 17.6405 30.4071 26.6923 21.9053 27.4923V33.3824H24.2887C24.6738 33.3827 25.047 33.5163 25.3448 33.7606C25.6426 34.0049 25.8465 34.3448 25.922 34.7225L26.2387 36.2992H30.6555C30.987 36.2992 31.3049 36.4309 31.5394 36.6653C31.7738 36.8997 31.9055 37.2176 31.9055 37.5492C31.9055 37.8807 31.7738 38.1987 31.5394 38.4331C31.3049 38.6675 30.987 38.7992 30.6555 38.7992H10.6551C10.3236 38.7992 10.0056 38.6675 9.77119 38.4331C9.53677 38.1987 9.40507 37.8807 9.40507 37.5492C9.40507 37.2176 9.53677 36.8997 9.77119 36.6653C10.0056 36.4309 10.3236 36.2992 10.6551 36.2992H15.0718L15.3885 34.7225C15.464 34.3448 15.668 34.0049 15.9657 33.7606C16.2635 33.5163 16.6367 33.3827 17.0219 33.3824H19.4053V27.4923C10.9051 26.6923 9.34174 17.6388 9.05507 10.392C8.97006 8.28198 8.9284 7.22529 9.72174 6.25027C10.5134 5.27359 11.4618 5.11359 13.3601 4.79358C15.7716 4.39837 18.2117 4.20492 20.6553 4.21524ZM22.242 11.2137L22.0786 10.9204C21.4453 9.782 21.1286 9.21533 20.6553 9.21533C20.1819 9.21533 19.8653 9.782 19.2319 10.9204L19.0686 11.2137C18.8886 11.537 18.7986 11.697 18.6586 11.8037C18.5169 11.9104 18.3419 11.9504 17.9919 12.0287L17.6752 12.102C16.4452 12.3804 15.8302 12.5187 15.6835 12.9887C15.5368 13.4604 15.9569 13.9504 16.7952 14.9304L17.0119 15.1838C17.2502 15.4621 17.3702 15.6004 17.4235 15.7738C17.4769 15.9471 17.4586 16.1321 17.4235 16.5038L17.3902 16.8421C17.2635 18.1505 17.2002 18.8055 17.5819 19.0955C17.9652 19.3855 18.5419 19.1205 19.6936 18.5905L19.9903 18.4538C20.3186 18.3038 20.4819 18.2288 20.6553 18.2288C20.8286 18.2288 20.9919 18.3038 21.3203 18.4538L21.617 18.5905C22.7686 19.1222 23.3453 19.3855 23.7287 19.0955C24.112 18.8055 24.047 18.1505 23.9203 16.8421L23.887 16.5038C23.852 16.1321 23.8337 15.9471 23.887 15.7738C23.9403 15.6021 24.0603 15.4621 24.2987 15.1838L24.5153 14.9304C25.3537 13.9504 25.7737 13.4604 25.627 12.9887C25.4804 12.5187 24.8654 12.3804 23.6353 12.102L23.3187 12.0287C22.9686 11.9504 22.7936 11.912 22.652 11.8037C22.512 11.697 22.422 11.537 22.242 11.2137Z"
              fill="#F8FAFC"
            />
          </svg>
          <div class="font-medium text-4xl pl-2 pt-1">
            {{ format(contributor.score) }}
          </div>
        </div>
        <div class="flex flex-row text-neutral-400 items-center pt-3 font-medium text-3xl">
          #{{ format(contributor.rank) }}
        </div>
      </div>
      <svg width="238" viewBox="0 0 1386 218" fill="none" xmlns="http://www.w3.org/2000/svg">
<path d="M289.753 199C281.909 199 274.208 198.257 266.65 196.772C259.091 195.286 252.103 193.14 245.686 190.334C239.268 187.528 233.706 184.227 229 180.431L239.91 145.025C244.331 148.326 249.251 151.215 254.67 153.691C260.09 156.166 265.794 158.147 271.784 159.633C277.774 160.953 283.763 161.613 289.753 161.613C299.165 161.613 305.726 160.21 309.434 157.404C313.284 154.433 315.209 150.802 315.209 146.51C315.209 143.869 314.639 141.641 313.498 139.825C312.357 138.01 310.432 136.442 307.722 135.121C305.155 133.636 301.661 132.398 297.24 131.407L272.212 125.217C258.521 121.916 248.324 116.139 241.621 107.886C234.918 99.6328 231.567 88.9863 231.567 75.9464C231.567 64.392 234.205 54.4058 239.482 45.9876C244.901 37.4044 252.388 30.8019 261.944 26.1802C271.641 21.3934 282.765 19 295.315 19C302.303 19 309.006 19.7428 315.423 21.2283C321.984 22.7139 328.045 24.9422 333.606 27.9134C339.168 30.7194 343.875 34.0206 347.725 37.8171L336.815 70.9945C331.396 66.3728 325.05 62.8239 317.776 60.348C310.646 57.707 303.016 56.3865 294.887 56.3865C289.61 56.3865 285.118 57.1293 281.41 58.6149C277.702 59.9354 274.85 61.9161 272.853 64.5571C270.999 67.1981 270.072 70.2517 270.072 73.718C270.072 77.1843 271.285 80.1554 273.709 82.6314C276.276 84.9422 280.911 86.923 287.614 88.5736L312.428 94.7634C326.262 98.2297 336.601 103.924 343.447 111.847C350.292 119.77 353.715 130.087 353.715 142.796C353.715 154.021 351.077 163.924 345.8 172.508C340.523 180.926 333.107 187.446 323.552 192.067C313.997 196.689 302.731 199 289.753 199Z" fill="white"/>
<path d="M423.745 199C412.051 199 401.854 196.442 393.155 191.325C384.455 186.208 377.681 178.862 372.832 169.289C367.983 159.715 365.559 148.409 365.559 135.369C365.559 122.164 367.983 110.857 372.832 101.448C377.681 91.8748 384.455 84.5296 393.155 79.4127C401.854 74.2957 412.051 71.7373 423.745 71.7373C435.439 71.7373 445.636 74.2957 454.335 79.4127C463.035 84.5296 469.738 91.8748 474.444 101.448C479.293 110.857 481.717 122.164 481.717 135.369C481.717 148.409 479.293 159.715 474.444 169.289C469.738 178.862 463.035 186.208 454.335 191.325C445.636 196.442 435.439 199 423.745 199ZM423.745 166.565C429.449 166.565 434.156 164.089 437.864 159.138C441.572 154.186 443.426 146.263 443.426 135.369C443.426 124.31 441.572 116.387 437.864 111.6C434.156 106.648 429.449 104.172 423.745 104.172C417.898 104.172 413.12 106.648 409.412 111.6C405.704 116.387 403.85 124.31 403.85 135.369C403.85 146.263 405.704 154.186 409.412 159.138C413.12 164.089 417.898 166.565 423.745 166.565Z" fill="white"/>
<path d="M538.526 199C529.399 199 521.912 197.102 516.064 193.305C510.217 189.344 505.796 183.484 502.801 175.726C499.949 167.968 498.523 158.147 498.523 146.263V74.4608H536.601V147.501C536.601 151.462 537.029 154.763 537.884 157.404C538.882 160.045 540.38 162.026 542.377 163.347C544.373 164.667 546.869 165.327 549.864 165.327C553.286 165.327 556.281 164.42 558.848 162.604C561.558 160.623 563.626 157.9 565.052 154.433C566.621 150.802 567.405 146.593 567.405 141.806V74.4608H605.483V196.276H568.261V173.993H571.683C568.546 182.081 564.125 188.271 558.42 192.563C552.859 196.854 546.227 199 538.526 199Z" fill="white"/>
<path d="M627.642 196.276V74.4608H664.65V95.7538H662.297C665.719 87.9959 670.568 82.0537 676.843 77.9271C683.261 73.8006 690.534 71.7373 698.663 71.7373C707.077 71.7373 713.994 73.6355 719.413 77.4319C724.832 81.0633 728.897 86.8404 731.606 94.7634C734.316 102.521 735.671 112.343 735.671 124.227V196.276H697.593V125.96C697.593 121.008 697.094 117.047 696.096 114.076C695.098 110.939 693.6 108.711 691.603 107.391C689.75 106.07 687.396 105.41 684.544 105.41C680.694 105.41 677.342 106.4 674.49 108.381C671.638 110.197 669.427 112.838 667.858 116.304C666.432 119.77 665.719 123.897 665.719 128.684V196.276H627.642Z" fill="white"/>
<path d="M798.444 199C789.46 199 781.473 196.442 774.485 191.325C767.64 186.208 762.221 178.862 758.228 169.289C754.377 159.715 752.452 148.409 752.452 135.369C752.452 121.999 754.377 110.609 758.228 101.201C762.221 91.7923 767.64 84.5296 774.485 79.4127C781.473 74.2957 789.46 71.7373 798.444 71.7373C806.288 71.7373 813.347 73.8831 819.622 78.1747C825.897 82.4663 830.104 87.9959 832.244 94.7634H829.891V21.7235H867.968V196.276H830.746V174.241H832.671C830.675 181.669 826.468 187.693 820.05 192.315C813.775 196.772 806.573 199 798.444 199ZM810.638 166.565C816.342 166.565 821.049 164.089 824.756 159.138C828.464 154.186 830.318 146.263 830.318 135.369C830.318 124.31 828.464 116.387 824.756 111.6C821.049 106.648 816.342 104.172 810.638 104.172C804.791 104.172 800.013 106.648 796.305 111.6C792.597 116.387 790.743 124.31 790.743 135.369C790.743 146.263 792.597 154.186 796.305 159.138C800.013 164.089 804.791 166.565 810.638 166.565Z" fill="white"/>
<path d="M931.955 199C925.537 199 919.334 198.505 913.344 197.514C907.497 196.524 902.149 195.039 897.3 193.058C892.451 191.077 888.102 188.684 884.251 185.878L893.022 157.404C896.587 159.715 900.509 161.779 904.787 163.594C909.208 165.41 913.772 166.813 918.478 167.803C923.184 168.794 927.748 169.289 932.169 169.289C937.446 169.289 941.225 168.464 943.507 166.813C945.788 164.997 946.929 162.686 946.929 159.88C946.929 157.404 946.145 155.506 944.576 154.186C943.15 152.865 941.082 151.957 938.373 151.462L914.628 147.006C905.786 145.19 898.94 141.476 894.091 135.864C889.242 130.087 886.818 122.576 886.818 113.333C886.818 104.75 888.886 97.4044 893.022 91.2971C897.3 85.0248 903.076 80.238 910.349 76.9367C917.765 73.4704 926.251 71.7373 935.806 71.7373C940.94 71.7373 946.002 72.2325 950.994 73.2228C955.985 74.0482 960.763 75.4512 965.326 77.4319C969.89 79.2476 974.026 81.7235 977.734 84.8597L968.321 112.838C965.612 110.527 962.403 108.546 958.695 106.895C954.987 105.245 951.136 103.924 947.143 102.934C943.293 101.779 939.727 101.201 936.447 101.201C930.6 101.201 926.464 102.109 924.04 103.924C921.616 105.74 920.403 108.051 920.403 110.857C920.403 113.003 921.045 114.818 922.329 116.304C923.612 117.624 925.609 118.532 928.318 119.028L952.063 123.732C961.191 125.382 968.179 129.014 973.028 134.626C978.019 140.073 980.515 147.501 980.515 156.909C980.515 165.823 978.518 173.415 974.525 179.688C970.532 185.96 964.899 190.747 957.625 194.048C950.352 197.349 941.795 199 931.955 199Z" fill="white"/>
<path d="M1050.3 199C1034.32 199 1022.49 194.708 1014.79 186.125C1007.09 177.542 1003.24 164.585 1003.24 147.253V106.895H983.555V74.4608H1003.24V39.055H1041.31V74.4608H1071.26V106.895H1041.31V145.768C1041.31 151.875 1042.53 156.414 1044.95 159.385C1047.52 162.191 1051.51 163.594 1056.93 163.594C1058.64 163.594 1060.49 163.347 1062.49 162.851C1064.63 162.356 1066.98 161.779 1069.55 161.118L1074.68 192.81C1071.4 194.791 1067.55 196.276 1063.13 197.267C1058.85 198.422 1054.58 199 1050.3 199Z" fill="white"/>
<path d="M1142.47 199C1129.64 199 1118.52 196.442 1109.1 191.325C1099.83 186.043 1092.7 178.615 1087.71 169.041C1082.72 159.468 1080.22 148.161 1080.22 135.121C1080.22 122.576 1082.58 111.6 1087.28 102.191C1092.13 92.6176 1098.69 85.1898 1106.96 79.9078C1115.38 74.4608 1124.93 71.7373 1135.63 71.7373C1146.33 71.7373 1155.52 74.2957 1163.23 79.4127C1170.93 84.5296 1176.84 91.8748 1180.98 101.448C1185.26 110.857 1187.4 121.916 1187.4 134.626V144.282H1112.1V123.484H1159.59L1156.17 126.703C1156.17 117.79 1154.53 111.187 1151.25 106.895C1147.97 102.439 1143.33 100.21 1137.34 100.21C1132.92 100.21 1129.07 101.448 1125.79 103.924C1122.65 106.235 1120.23 109.702 1118.52 114.323C1116.8 118.945 1115.95 124.722 1115.95 131.655V133.883C1115.95 141.641 1116.88 147.913 1118.73 152.7C1120.73 157.487 1123.79 161.036 1127.93 163.347C1132.06 165.492 1137.27 166.565 1143.54 166.565C1148.96 166.565 1154.6 165.658 1160.44 163.842C1166.43 161.861 1171.71 159.055 1176.27 155.424L1185.69 184.392C1180.27 188.849 1173.64 192.398 1165.79 195.039C1157.95 197.68 1150.18 199 1142.47 199Z" fill="white"/>
<path d="M1203.8 196.276V74.4608H1240.81V104.42H1238.67C1240.1 94.5158 1243.66 86.8405 1249.37 81.3934C1255.21 75.7813 1262.84 72.6451 1272.26 71.9849L1282.74 70.9945L1284.88 108.133L1264.13 110.362C1256.57 111.187 1251.08 113.663 1247.66 117.79C1244.23 121.751 1242.52 127.693 1242.52 135.616V196.276H1203.8Z" fill="white"/>
<path d="M1337.44 199C1331.02 199 1324.82 198.505 1318.83 197.514C1312.98 196.524 1307.63 195.039 1302.79 193.058C1297.94 191.077 1293.59 188.684 1289.74 185.878L1298.51 157.404C1302.07 159.715 1305.99 161.779 1310.27 163.594C1314.69 165.41 1319.26 166.813 1323.96 167.803C1328.67 168.794 1333.23 169.289 1337.65 169.289C1342.93 169.289 1346.71 168.464 1348.99 166.813C1351.27 164.997 1352.41 162.686 1352.41 159.88C1352.41 157.404 1351.63 155.506 1350.06 154.186C1348.64 152.865 1346.57 151.957 1343.86 151.462L1320.11 147.006C1311.27 145.19 1304.43 141.476 1299.58 135.864C1294.73 130.087 1292.3 122.576 1292.3 113.333C1292.3 104.75 1294.37 97.4044 1298.51 91.2971C1302.79 85.0248 1308.56 80.238 1315.83 76.9367C1323.25 73.4704 1331.74 71.7373 1341.29 71.7373C1346.43 71.7373 1351.49 72.2325 1356.48 73.2228C1361.47 74.0482 1366.25 75.4512 1370.81 77.4319C1375.38 79.2476 1379.51 81.7235 1383.22 84.8597L1373.81 112.838C1371.1 110.527 1367.89 108.546 1364.18 106.895C1360.47 105.245 1356.62 103.924 1352.63 102.934C1348.78 101.779 1345.21 101.201 1341.93 101.201C1336.09 101.201 1331.95 102.109 1329.53 103.924C1327.1 105.74 1325.89 108.051 1325.89 110.857C1325.89 113.003 1326.53 114.818 1327.81 116.304C1329.1 117.624 1331.09 118.532 1333.8 119.028L1357.55 123.732C1366.68 125.382 1373.66 129.014 1378.51 134.626C1383.5 140.073 1386 147.501 1386 156.909C1386 165.823 1384 173.415 1380.01 179.688C1376.02 185.96 1370.38 190.747 1363.11 194.048C1355.84 197.349 1347.28 199 1337.44 199Z" fill="white"/>
<path d="M62.0471 151.581L54.3184 147.465L9.78721 123.747C6.91519 122.218 4.52474 120.02 2.8561 117.372C1.18745 114.725 0.298634 111.723 0.280372 108.667C0.261723 105.613 1.11324 102.612 2.75008 99.9672C4.38691 97.3227 6.75053 95.1279 9.60379 93.6036C20.0988 87.9877 29.5665 82.9215 38.4645 78.1601C41.2411 76.6743 43.9623 75.2182 46.6419 73.7843C47.9403 73.0895 49.2289 72.4 50.5093 71.7148C51.8063 71.0207 53.0949 70.3312 54.3768 69.6453C55.6927 68.9411 57.0015 68.2408 58.305 67.5433C59.5784 66.8618 60.8468 66.1831 62.1117 65.5063L62.0879 97.226L54.353 101.364L47.4777 105.043L40.6023 108.722L54.342 116.039L62.0707 120.156L62.0471 151.581Z" fill="#00DC82"/>
<path d="M113.612 36.2702L169.462 2.52065C172.287 0.842303 175.491 -0.0268188 178.752 0.000631332C182.013 0.0280884 185.216 0.951418 188.041 2.67766C190.864 4.4035 193.209 6.87177 194.84 9.83387C196.47 12.796 197.329 16.1483 197.329 19.5533L197.287 198.751C197.288 202.156 196.431 205.494 194.801 208.431C193.171 211.367 190.826 213.797 188.002 215.476C185.177 217.156 181.974 218.026 178.712 217.999C175.451 217.973 172.247 217.05 169.423 215.323L113.612 181.21C73.1565 155.494 80.5254 165 80.5254 121.074L80.5254 93.9137C80.5254 51 76.1565 59 113.612 36.2702ZM129.121 155.494L168.075 179.292L168.098 38.4995C168.098 38.4995 146.469 50.108 126.313 63.9791C106.157 77.8503 109.732 69.5 109.762 93.9137C109.793 118.327 109.748 120.294 109.748 120.294C109.762 147 105.657 140.5 129.121 155.494Z" fill="#00DC82"/>
</svg>

    </div>
    <div class="flex flex-col w-[31.5%] text-white justify-between">
      <div class="h-[48%]">
        <IssuesCard :issues="contributor.issues" />
      </div>
      <div class="h-[48%]">
        <PullRequestCard :pull-requests="contributor.merged_pull_requests" />
      </div>
    </div>
    <div class="flex flex-col w-[31.5%] text-white justify-between">
      <div class="h-[48%]">
        <CommentsCard :comments="contributor.comments" />
      </div>
      <div class="h-[48%]">
        <ReactionsCard :reactions="contributor.reactions" />
      </div>
    </div>
  </div>
</template>

<style scoped lang="postcss">
.card-border::before {
  content: '';
  position: absolute;
  top: 0;
  left: 0;
  width: 100%;
  height: 100%;
  border-radius: 10px;
  background-image: linear-gradient(to bottom right, #00dc82, #1e293b);
  z-index: -1;
}

.card-border {
  z-index: 50;
}

.profile-card {
  background-image: url('http://localhost:3000/card-gradient-bg.svg');
  background-repeat: no-repeat;
  background-size: 300%;
}

.card {
  @apply rounded-xl border bg-no-repeat bg-top p-6 text-center flex flex-col items-center justify-end;
}

.issues-card {
  background-image: linear-gradient(180deg, rgba(0, 220, 130, 0.4) 0%, rgba(0, 220, 130, 0) 100%, rgba(2, 4, 32, 0.5)),
    url('http://localhost:3000/issues-card-bg.svg');
}

.comments-card {
  background-image: linear-gradient(180deg, rgba(64, 187, 255, 0.4) 0%, rgba(64, 187, 255, 0) 100%, rgba(2, 4, 32, 0.5)),
    url('http://localhost:3000/comments-card-bg.svg');
}

.pull-requests-card {
  background-image: linear-gradient(180deg, rgba(139, 92, 246, 0.4) 0%, rgba(139, 92, 246, 0) 100%, rgba(2, 4, 32, 0.5)),
    url('http://localhost:3000/pull-requests-card-bg.svg');
}

.reactions-card {
  background-image: linear-gradient(180deg, rgba(247, 209, 76, 0.4) 0%, rgba(247, 209, 76, 0) 100%, rgba(2, 4, 32, 0.5)),
    url('http://localhost:3000/reactions-card-bg.webp');
}
</style>
